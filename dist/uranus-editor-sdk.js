/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/sdk/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/sdk/core/assets.ts":
/*!********************************!*\
  !*** ./src/sdk/core/assets.ts ***!
  \********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadEditorScriptAssets = exports.batchPreloadAssets = void 0;\r\nfunction batchPreloadAssets(options) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var items, promises;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    items = editor.call(\"assets:find\", function (asset) {\r\n                        // --- check if the type is accepted\r\n                        var type = asset.get(\"type\");\r\n                        if (asset.get(\"preload\") === false)\r\n                            return false;\r\n                        if (!options || (options.exclude && options.exclude.indexOf(type) === -1)) {\r\n                            return true;\r\n                        }\r\n                        else {\r\n                            return false;\r\n                        }\r\n                    });\r\n                    promises = [];\r\n                    items.forEach(function (itemArr) {\r\n                        var item = itemArr[1];\r\n                        var asset = _this.app.assets.get(item.get(\"id\"));\r\n                        if (!asset || asset.loaded === true)\r\n                            return true;\r\n                        var promise = new Promise(function (resolve, reject) {\r\n                            asset.ready(resolve);\r\n                            asset.on(\"error\", reject);\r\n                            _this.app.assets.load(asset);\r\n                        });\r\n                        promises.push(promise);\r\n                    });\r\n                    return [4 /*yield*/, Promise.all(promises)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.batchPreloadAssets = batchPreloadAssets;\r\nfunction loadEditorScriptAssets(scriptTypes) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var promises, _loop_1, this_1, _i, scriptTypes_1, scriptType;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!editor)\r\n                        return [2 /*return*/];\r\n                    promises = [];\r\n                    _loop_1 = function (scriptType) {\r\n                        var item = editor.call(\"assets:scripts:assetByScript\", scriptType);\r\n                        var asset = this_1.app.assets.get(item.get(\"id\"));\r\n                        var promise = new Promise(function (resolve) {\r\n                            asset.ready(resolve);\r\n                            _this.app.assets.load(asset);\r\n                        });\r\n                        promises.push(promise);\r\n                    };\r\n                    this_1 = this;\r\n                    for (_i = 0, scriptTypes_1 = scriptTypes; _i < scriptTypes_1.length; _i++) {\r\n                        scriptType = scriptTypes_1[_i];\r\n                        _loop_1(scriptType);\r\n                    }\r\n                    return [4 /*yield*/, Promise.all(promises)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.loadEditorScriptAssets = loadEditorScriptAssets;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYXNzZXRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBLFNBQXNCLGtCQUFrQixDQUFlLE9BQVk7Ozs7Ozs7b0JBQzNELEtBQUssR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxVQUFDLEtBQVU7d0JBQ2xELG9DQUFvQzt3QkFDcEMsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQzt3QkFFL0IsSUFBSSxLQUFLLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEtBQUs7NEJBQUUsT0FBTyxLQUFLLENBQUM7d0JBRWpELElBQUksQ0FBQyxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU7NEJBQ3pFLE9BQU8sSUFBSSxDQUFDO3lCQUNiOzZCQUFNOzRCQUNMLE9BQU8sS0FBSyxDQUFDO3lCQUNkO29CQUNILENBQUMsQ0FBQyxDQUFDO29CQUVHLFFBQVEsR0FBbUIsRUFBRSxDQUFDO29CQUVwQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQUMsT0FBWTt3QkFDekIsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUN4QixJQUFNLEtBQUssR0FBRyxLQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO3dCQUVsRCxJQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssSUFBSTs0QkFBRSxPQUFPLElBQUksQ0FBQzt3QkFFakQsSUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTTs0QkFDMUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQzs0QkFFckIsS0FBSyxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7NEJBRTFCLEtBQUksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDOUIsQ0FBQyxDQUFDLENBQUM7d0JBRUgsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDekIsQ0FBQyxDQUFDLENBQUM7b0JBRUgscUJBQU0sT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsRUFBQTs7b0JBQTNCLFNBQTJCLENBQUM7Ozs7O0NBQzdCO0FBbENELGdEQWtDQztBQUVELFNBQXNCLHNCQUFzQixDQUUxQyxXQUFxQjs7Ozs7OztvQkFFckIsSUFBSSxDQUFDLE1BQU07d0JBQUUsc0JBQU87b0JBRWQsUUFBUSxHQUFHLEVBQUUsQ0FBQzt3Q0FFVCxVQUFVO3dCQUNuQixJQUFNLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLDhCQUE4QixFQUFFLFVBQVUsQ0FBQyxDQUFDO3dCQUVyRSxJQUFNLEtBQUssR0FBRyxPQUFLLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFFbEQsSUFBTSxPQUFPLEdBQUcsSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPOzRCQUNsQyxLQUFLLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDOzRCQUNyQixLQUFJLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQzlCLENBQUMsQ0FBQyxDQUFDO3dCQUNILFFBQVEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7OztvQkFUekIsV0FBb0MsRUFBWCwyQkFBVyxFQUFYLHlCQUFXLEVBQVgsSUFBVzt3QkFBekIsVUFBVTtnQ0FBVixVQUFVO3FCQVVwQjtvQkFFRCxxQkFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFBOztvQkFBM0IsU0FBMkIsQ0FBQzs7Ozs7Q0FDN0I7QUFyQkQsd0RBcUJDIn0=\n\n//# sourceURL=webpack:///./src/sdk/core/assets.ts?");

/***/ }),

/***/ "./src/sdk/core/entities.ts":
/*!**********************************!*\
  !*** ./src/sdk/core/entities.ts ***!
  \**********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.duplicateEntity = void 0;\r\nfunction duplicateEntity(entity, parent, ind) {\r\n    var _this = this;\r\n    var data = entity.json();\r\n    var children = data.children;\r\n    data.children = [];\r\n    data.resource_id = pc.guid.create();\r\n    data.parent = parent.get(\"resource_id\");\r\n    entity = new Observer(data);\r\n    editor.call(\"entities:updateChildToParentIndex\", entity.get(\"resource_id\"), parent.get(\"resource_id\"));\r\n    // call add event\r\n    editor.call(\"entities:add\", entity);\r\n    // sharedb\r\n    editor.call(\"realtime:scene:op\", {\r\n        p: [\"entities\", entity.get(\"resource_id\")],\r\n        oi: entity.json(),\r\n    });\r\n    // this is necessary for the entity to be added to the tree view\r\n    parent.history.enabled = false;\r\n    parent.insert(\"children\", entity.get(\"resource_id\"), ind);\r\n    parent.history.enabled = true;\r\n    // add children too\r\n    children.forEach(function (childId) {\r\n        _this.duplicateEntity(editor.call(\"entities:get\", childId), entity, undefined);\r\n    });\r\n    return entity;\r\n}\r\nexports.duplicateEntity = duplicateEntity;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXRpZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJlbnRpdGllcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFLQSxTQUFnQixlQUFlLENBRTdCLE1BQVcsRUFDWCxNQUFXLEVBQ1gsR0FBUTtJQUpWLGlCQTRDQztJQXRDQyxJQUFJLElBQUksR0FBRyxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekIsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUU3QixJQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztJQUNuQixJQUFJLENBQUMsV0FBVyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDcEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRXhDLE1BQU0sR0FBRyxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUM1QixNQUFNLENBQUMsSUFBSSxDQUNULG1DQUFtQyxFQUNuQyxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxFQUN6QixNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUMxQixDQUFDO0lBRUYsaUJBQWlCO0lBQ2pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBRXBDLFVBQVU7SUFDVixNQUFNLENBQUMsSUFBSSxDQUFDLG1CQUFtQixFQUFFO1FBQy9CLENBQUMsRUFBRSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzFDLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFO0tBQ2xCLENBQUMsQ0FBQztJQUVILGdFQUFnRTtJQUNoRSxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7SUFDL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMxRCxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFFOUIsbUJBQW1CO0lBQ25CLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQyxPQUFZO1FBQzVCLEtBQUksQ0FBQyxlQUFlLENBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLE9BQU8sQ0FBQyxFQUNwQyxNQUFNLEVBQ04sU0FBUyxDQUNWLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztJQUVILE9BQU8sTUFBTSxDQUFDO0FBQ2hCLENBQUM7QUE1Q0QsMENBNENDIn0=\n\n//# sourceURL=webpack:///./src/sdk/core/entities.ts?");

/***/ }),

/***/ "./src/sdk/core/main.ts":
/*!******************************!*\
  !*** ./src/sdk/core/main.ts ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Modules = __importStar(__webpack_require__(/*! ./modules */ \"./src/sdk/core/modules.ts\"));\r\nvar Assets = __importStar(__webpack_require__(/*! ./assets */ \"./src/sdk/core/assets.ts\"));\r\nvar Scripts = __importStar(__webpack_require__(/*! ./scripts */ \"./src/sdk/core/scripts.ts\"));\r\nvar Entities = __importStar(__webpack_require__(/*! ./entities */ \"./src/sdk/core/entities.ts\"));\r\nvar Systems = __importStar(__webpack_require__(/*! ./systems */ \"./src/sdk/core/systems.ts\"));\r\nvar interface_1 = __importDefault(__webpack_require__(/*! ../interface */ \"./src/sdk/interface/index.ts\"));\r\nvar Editor = /** @class */ (function () {\r\n    function Editor() {\r\n        // --- extend class with methods\r\n        this.loadScriptAsync = Modules.loadScriptAsync.bind(this);\r\n        this.loadWasmModuleAsync = Modules.loadWasmModuleAsync.bind(this);\r\n        this.wasmSupported = Modules.wasmSupported.bind(this);\r\n        this.loadModules = Modules.loadModules.bind(this);\r\n        this.batchPreloadAssets = Assets.batchPreloadAssets.bind(this);\r\n        this.loadEditorScriptAssets = Assets.loadEditorScriptAssets.bind(this);\r\n        this.batchExecuteScripts = Scripts.batchExecuteScripts.bind(this);\r\n        this.prepareEditorScriptAttributes = Scripts.prepareEditorScriptAttributes.bind(this);\r\n        this.duplicateEntity = Entities.duplicateEntity.bind(this);\r\n        this.runBatcher = Systems.runBatcher.bind(this);\r\n        this.app = editor ? editor.call(\"viewport:app\") : undefined;\r\n        this.interface = new interface_1.default();\r\n        // @ts-ignore\r\n        window.Uranus = {\r\n            Editor: this,\r\n        };\r\n        this.interface.boot();\r\n    }\r\n    Editor.inEditor = function () {\r\n        return (\r\n        // @ts-ignore\r\n        window.editor !== undefined &&\r\n            window.location.href.indexOf(\"launch.playcanvas.com\") === -1);\r\n    };\r\n    Editor.prototype.startAppLoop = function (startImmediately, updatePhysics) {\r\n        var _this = this;\r\n        if (!editor)\r\n            return;\r\n        if (updatePhysics) {\r\n            // @ts-ignore\r\n            this.app.systems.rigidbody.onLibraryLoaded();\r\n        }\r\n        this.appRunning = startImmediately;\r\n        this.interface.addRunUpdateButton(\"Update Running\", \"checkbox\", this.appRunning, function (state) {\r\n            _this.appRunning = state;\r\n            if (state === true) {\r\n                tick();\r\n            }\r\n        });\r\n        // --- Make pc.Application update\r\n        var update = function (dt) {\r\n            var app = _this.app;\r\n            // @ts-ignore\r\n            app.frame++;\r\n            // @ts-ignore\r\n            pc.ComponentSystem.update(dt);\r\n            // @ts-ignore\r\n            pc.ComponentSystem.animationUpdate(dt);\r\n            // @ts-ignore\r\n            pc.ComponentSystem.postUpdate(dt);\r\n            // fire update event\r\n            app.fire(\"update\", dt);\r\n        };\r\n        var tick = function () {\r\n            if (_this.appRunning === false)\r\n                return;\r\n            var app = _this.app;\r\n            // have current application pointer in pc\r\n            //@ts-ignore\r\n            pc.app = app;\r\n            //@ts-ignore\r\n            var now = pc.now();\r\n            //@ts-ignore\r\n            var ms = now - (app._time || now);\r\n            var dt = ms / 1000.0;\r\n            dt = pc.math.clamp(dt, 0, app.maxDeltaTime);\r\n            dt *= app.timeScale;\r\n            //@ts-ignore\r\n            app._time = now;\r\n            // Submit a request to queue up a new animation frame immediately\r\n            window.requestAnimationFrame(tick);\r\n            editor.call(\"viewport:render\");\r\n            update(dt);\r\n            if (updatePhysics === true) {\r\n                // @ts-ignore\r\n                _this.app.systems.rigidbody.onUpdate(dt);\r\n            }\r\n        };\r\n        tick();\r\n    };\r\n    return Editor;\r\n}());\r\nexports.default = Editor;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1haW4udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsaURBQXFDO0FBQ3JDLCtDQUFtQztBQUNuQyxpREFBcUM7QUFDckMsbURBQXVDO0FBQ3ZDLGlEQUFxQztBQUVyQywyREFBcUM7QUFJckM7SUF3QkU7UUFsQkEsZ0NBQWdDO1FBQ3pCLG9CQUFlLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDckQsd0JBQW1CLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3RCxrQkFBYSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELGdCQUFXLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFN0MsdUJBQWtCLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUMxRCwyQkFBc0IsR0FBRyxNQUFNLENBQUMsc0JBQXNCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWxFLHdCQUFtQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0Qsa0NBQTZCLEdBQUcsT0FBTyxDQUFDLDZCQUE2QixDQUFDLElBQUksQ0FDL0UsSUFBSSxDQUNMLENBQUM7UUFFSyxvQkFBZSxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRXRELGVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUdoRCxJQUFJLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFB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\n\n//# sourceURL=webpack:///./src/sdk/core/main.ts?");

/***/ }),

/***/ "./src/sdk/core/modules.ts":
/*!*********************************!*\
  !*** ./src/sdk/core/modules.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.loadModules = exports.wasmSupported = exports.loadWasmModuleAsync = exports.loadScriptAsync = void 0;\r\nfunction loadScriptAsync(url) {\r\n    return new Promise(function (resolve) {\r\n        var tag = document.createElement(\"script\");\r\n        tag.onload = function () {\r\n            resolve();\r\n        };\r\n        tag.onerror = function () {\r\n            throw new Error(\"failed to load \" + url);\r\n        };\r\n        tag.async = true;\r\n        tag.src = url;\r\n        document.head.appendChild(tag);\r\n    });\r\n}\r\nexports.loadScriptAsync = loadScriptAsync;\r\nfunction loadWasmModuleAsync(moduleName, jsUrl, binaryUrl) {\r\n    var _this = this;\r\n    return new Promise(function (resolve) {\r\n        _this.loadScriptAsync(jsUrl).then(function () {\r\n            // @ts-ignore\r\n            var lib = window[moduleName];\r\n            // @ts-ignore\r\n            window[moduleName + \"Lib\"] = lib;\r\n            lib({\r\n                locateFile: function () {\r\n                    return binaryUrl;\r\n                },\r\n            }).then(function (instance) {\r\n                // @ts-ignore\r\n                window[moduleName] = instance;\r\n                resolve();\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.loadWasmModuleAsync = loadWasmModuleAsync;\r\nfunction wasmSupported() {\r\n    try {\r\n        if (typeof WebAssembly === \"object\" &&\r\n            typeof WebAssembly.instantiate === \"function\") {\r\n            var module = new WebAssembly.Module(Uint8Array.of(0x0, 0x61, 0x73, 0x6d, 0x01, 0x00, 0x00, 0x00));\r\n            if (module instanceof WebAssembly.Module)\r\n                return new WebAssembly.Instance(module) instanceof WebAssembly.Instance;\r\n        }\r\n    }\r\n    catch (e) { }\r\n    return false;\r\n}\r\nexports.wasmSupported = wasmSupported;\r\nfunction loadModules(modules) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var urlPrefix, wasm, _i, modules_1, module, glueAsset, wasmAsset, fallbackAsset;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    urlPrefix = \"\";\r\n                    wasm = this.wasmSupported();\r\n                    _i = 0, modules_1 = modules;\r\n                    _a.label = 1;\r\n                case 1:\r\n                    if (!(_i < modules_1.length)) return [3 /*break*/, 6];\r\n                    module = modules_1[_i];\r\n                    glueAsset = this.app.assets.find(module.glueUrl);\r\n                    wasmAsset = this.app.assets.find(module.wasmUrl);\r\n                    fallbackAsset = this.app.assets.find(module.fallbackUrl);\r\n                    if (!glueAsset || !wasmAsset || !fallbackAsset)\r\n                        return [3 /*break*/, 5];\r\n                    // --- prepare asset urls\r\n                    module.glueUrl = glueAsset.getFileUrl();\r\n                    module.wasmUrl = wasmAsset.getFileUrl();\r\n                    module.fallbackUrl = fallbackAsset.getFileUrl();\r\n                    if (!wasm) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, this.loadWasmModuleAsync(module.moduleName, urlPrefix + module.glueUrl, urlPrefix + module.wasmUrl)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [3 /*break*/, 5];\r\n                case 3: return [4 /*yield*/, this.loadWasmModuleAsync(module.moduleName, urlPrefix + module.fallbackUrl, \"\")];\r\n                case 4:\r\n                    _a.sent();\r\n                    _a.label = 5;\r\n                case 5:\r\n                    _i++;\r\n                    return [3 /*break*/, 1];\r\n                case 6: return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.loadModules = loadModules;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kdWxlcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1vZHVsZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBRUEsU0FBZ0IsZUFBZSxDQUFDLEdBQVc7SUFDekMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU87UUFDekIsSUFBSSxHQUFHLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUMzQyxHQUFHLENBQUMsTUFBTSxHQUFHO1lBQ1gsT0FBTyxFQUFFLENBQUM7UUFDWixDQUFDLENBQUM7UUFDRixHQUFHLENBQUMsT0FBTyxHQUFHO1lBQ1osTUFBTSxJQUFJLEtBQUssQ0FBQyxpQkFBaUIsR0FBRyxHQUFHLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUM7UUFDRixHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztRQUNqQixHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQztRQUNkLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQWJELDBDQWFDO0FBRUQsU0FBZ0IsbUJBQW1CLENBRWpDLFVBQWtCLEVBQ2xCLEtBQWEsRUFDYixTQUFpQjtJQUpuQixpQkF1QkM7SUFqQkMsT0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU87UUFDekIsS0FBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUM7WUFDL0IsYUFBYTtZQUNiLElBQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUMvQixhQUFhO1lBQ2IsTUFBTSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDakMsR0FBRyxDQUFDO2dCQUNGLFVBQVUsRUFBRTtvQkFDVixPQUFPLFNBQVMsQ0FBQztnQkFDbkIs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\n\n//# sourceURL=webpack:///./src/sdk/core/modules.ts?");

/***/ }),

/***/ "./src/sdk/core/scripts.ts":
/*!*********************************!*\
  !*** ./src/sdk/core/scripts.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.prepareEditorScriptAttributes = exports.batchExecuteScripts = void 0;\r\nfunction batchExecuteScripts() {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var scriptTypes, entities, scriptInstances, _i, entities_1, item, scripts, scriptType, inEditor, entity, instance, instanceRef;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (!editor)\r\n                        return [2 /*return*/];\r\n                    scriptTypes = editor.call(\"assets:scripts:list\");\r\n                    return [4 /*yield*/, this.loadEditorScriptAssets(scriptTypes)];\r\n                case 1:\r\n                    _a.sent();\r\n                    return [4 /*yield*/, this.batchPreloadAssets({\r\n                            exclude: [\"script\", \"wasm\"],\r\n                        })];\r\n                case 2:\r\n                    _a.sent();\r\n                    entities = editor.call(\"entities:list\");\r\n                    scriptInstances = {};\r\n                    console.log(\"Uranus.Editor starting script execution\");\r\n                    for (_i = 0, entities_1 = entities; _i < entities_1.length; _i++) {\r\n                        item = entities_1[_i];\r\n                        scripts = item.get(\"components.script.scripts\");\r\n                        if (!scripts)\r\n                            continue;\r\n                        for (scriptType in scripts) {\r\n                            inEditor = item.get(\"components.script.scripts.\" + scriptType + \".attributes.inEditor\");\r\n                            if (inEditor === null)\r\n                                continue;\r\n                            entity = item.entity;\r\n                            if (!entity.script) {\r\n                                entity.addComponent(\"script\");\r\n                            }\r\n                            if (entity.script[scriptType]) {\r\n                                entity.script.destroy(scriptType);\r\n                            }\r\n                            instance = entity.script.create(scriptType, {\r\n                                enabled: false,\r\n                            });\r\n                            this.prepareEditorScriptAttributes(instance);\r\n                            instance.enabled = inEditor;\r\n                            console.log(\"Uranus.Editor added scriptType \" + scriptType + \" on entity \\\"\" + entity.name + \"\\\"\");\r\n                            if (typeof instance[\"editorInitialize\"] === \"function\") {\r\n                                instance[\"editorInitialize\"]();\r\n                            }\r\n                            instanceRef = scriptInstances[item.get(\"resource_id\")];\r\n                            if (!instanceRef) {\r\n                                scriptInstances[item.get(\"resource_id\")] = {\r\n                                    instances: [instance],\r\n                                    scriptTypes: [scriptType],\r\n                                };\r\n                            }\r\n                            else {\r\n                                instanceRef.instances.push(instance);\r\n                                instanceRef.scriptTypes.push(scriptType);\r\n                            }\r\n                        }\r\n                    }\r\n                    // --- subscribe to inspector render event to provide UI extension to editor scripts\r\n                    editor.on(\"attributes:inspect[entity]\", function (items) {\r\n                        var resource_id = items[0].get(\"resource_id\");\r\n                        // --- each time the Playcanvas inspector opens, the script component DOM is re-rendered\r\n                        // --- we find the element and pass it to the script editor callback, if requested\r\n                        if (scriptInstances[resource_id]) {\r\n                            var instancesRef_1 = scriptInstances[resource_id];\r\n                            var panelComponents_1 = editor.call(\"attributes:entity.panelComponents\");\r\n                            instancesRef_1.scriptTypes.forEach(function (scriptType, index) {\r\n                                var nodeList = Array.from(panelComponents_1.dom.querySelectorAll(\".pcui-panel-header-title\"));\r\n                                var element = nodeList.find(function (el) { return el.textContent === scriptType; });\r\n                                if (element) {\r\n                                    try {\r\n                                        element = element.parentElement.nextSibling;\r\n                                        if (element) {\r\n                                            var instance = instancesRef_1.instances[index];\r\n                                            if (typeof instance[\"editorScriptPanelRender\"] === \"function\") {\r\n                                                instance[\"editorScriptPanelRender\"](element);\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    catch (error) { }\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.batchExecuteScripts = batchExecuteScripts;\r\nfunction prepareEditorScriptAttributes(script) {\r\n    if (!editor || !script)\r\n        return;\r\n    // --- check if we are running in editor to prepare the attributes\r\n    var item = editor.call(\"entities:get\", script.entity._guid);\r\n    var path = \"components.script.scripts.\" + script.__scriptType.__name + \".attributes\";\r\n    var settings = item.get(path);\r\n    var properties = [];\r\n    for (var property in settings) {\r\n        script[property] = settings[property];\r\n        properties.push(property);\r\n    }\r\n    // --- attach an attr on change listener\r\n    properties.forEach(function (property) {\r\n        var raw = item.getRaw(path + \".\" + property);\r\n        var times = 0;\r\n        var isArray = Array.isArray(raw);\r\n        if (isArray) {\r\n            times += raw.length;\r\n        }\r\n        else {\r\n            times = 1;\r\n        }\r\n        var _loop_1 = function (i) {\r\n            var setPath = path + \".\" + property + (isArray ? \".\" + i : \"\") + \":set\";\r\n            item.on(setPath, function (value, valueOld) {\r\n                if (isArray) {\r\n                    // --- find the correct key for the object\r\n                    var obj = script[property];\r\n                    var keys = void 0;\r\n                    if (isNaN(obj.x) === false) {\r\n                        keys = [\"x\", \"y\", \"z\", \"w\"];\r\n                    }\r\n                    else if (isNaN(obj.r) === false) {\r\n                        keys = [\"r\", \"g\", \"b\", \"a\"];\r\n                    }\r\n                    obj[keys[i]] = value;\r\n                }\r\n                else {\r\n                    script[property] = value;\r\n                }\r\n                script.fire(\"attr:\" + property, script[property], valueOld);\r\n                if (typeof script[\"editorAttrChange\"] === \"function\") {\r\n                    script[\"editorAttrChange\"](property, script[property], valueOld);\r\n                }\r\n            }.bind(script));\r\n        };\r\n        for (var i = 0; i < times; i++) {\r\n            _loop_1(i);\r\n        }\r\n    }.bind(script));\r\n}\r\nexports.prepareEditorScriptAttributes = prepareEditorScriptAttributes;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNjcmlwdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSUEsU0FBc0IsbUJBQW1COzs7Ozs7b0JBQ3ZDLElBQUksQ0FBQyxNQUFNO3dCQUFFLHNCQUFPO29CQUVkLFdBQVcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7b0JBRXZELHFCQUFNLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxXQUFXLENBQUMsRUFBQTs7b0JBQTlDLFNBQThDLENBQUM7b0JBRS9DLHFCQUFNLElBQUksQ0FBQyxrQkFBa0IsQ0FBQzs0QkFDNUIsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQzt5QkFDNUIsQ0FBQyxFQUFBOztvQkFGRixTQUVFLENBQUM7b0JBR0csUUFBUSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBQ3hDLGVBQWUsR0FBUSxFQUFFLENBQUM7b0JBRWhDLE9BQU8sQ0FBQyxHQUFHLENBQUMseUNBQXlDLENBQUMsQ0FBQztvQkFFdkQsV0FBMkIsRUFBUixxQkFBUSxFQUFSLHNCQUFRLEVBQVIsSUFBUSxFQUFFO3dCQUFsQixJQUFJO3dCQUNQLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7d0JBRXRELElBQUksQ0FBQyxPQUFPOzRCQUFFLFNBQVM7d0JBRXZCLEtBQVcsVUFBVSxJQUFJLE9BQU8sRUFBRTs0QkFFMUIsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQ3ZCLCtCQUE2QixVQUFVLHlCQUFzQixDQUM5RCxDQUFDOzRCQUVGLElBQUksUUFBUSxLQUFLLElBQUk7Z0NBQUUsU0FBUzs0QkFFMUIsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7NEJBRTNCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFB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\n\n//# sourceURL=webpack:///./src/sdk/core/scripts.ts?");

/***/ }),

/***/ "./src/sdk/core/systems.ts":
/*!*********************************!*\
  !*** ./src/sdk/core/systems.ts ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.runBatcher = void 0;\r\nfunction runBatcher(entities) {\r\n    var _this = this;\r\n    var batchGroups = editor.call(\"settings:project\").get(\"batchGroups\");\r\n    for (var groupID in batchGroups) {\r\n        var group = batchGroups[groupID];\r\n        this.app.batcher.addGroup(group.name, group.dynamic, group.maxAabbSize, group.id, group.layers);\r\n    }\r\n    var groupsToGenerate = [];\r\n    if (!entities)\r\n        return;\r\n    entities.forEach(function (entity) {\r\n        var modelComps = entity.findComponents(\"model\");\r\n        modelComps.forEach(function (modelComp) {\r\n            if (entity.parent && modelComp && modelComp.batchGroupId > -1) {\r\n                // @ts-ignore\r\n                _this.app.batcher.insert(\"model\", modelComp.batchGroupId, entity);\r\n                if (groupsToGenerate.indexOf(modelComp.batchGroupId) === -1) {\r\n                    groupsToGenerate.push(modelComp.batchGroupId);\r\n                }\r\n            }\r\n        });\r\n    });\r\n    console.time(\"Uranus.Editor running batcher\");\r\n    this.app.batcher.generate(groupsToGenerate);\r\n    console.timeEnd(\"Uranus.Editor running batcher\");\r\n    return groupsToGenerate;\r\n}\r\nexports.runBatcher = runBatcher;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3lzdGVtcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN5c3RlbXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBSUEsU0FBZ0IsVUFBVSxDQUFlLFFBQXFCO0lBQTlELGlCQXNDQztJQXJDQyxJQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBRXZFLEtBQUssSUFBTSxPQUFPLElBQUksV0FBVyxFQUFFO1FBQ2pDLElBQU0sS0FBSyxHQUFHLFdBQVcsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQ3ZCLEtBQUssQ0FBQyxJQUFJLEVBQ1YsS0FBSyxDQUFDLE9BQU8sRUFDYixLQUFLLENBQUMsV0FBVyxFQUNqQixLQUFLLENBQUMsRUFBRSxFQUNSLEtBQUssQ0FBQyxNQUFNLENBQ2IsQ0FBQztLQUNIO0lBRUQsSUFBTSxnQkFBZ0IsR0FBYSxFQUFFLENBQUM7SUFFdEMsSUFBSSxDQUFDLFFBQVE7UUFBRSxPQUFPO0lBRXRCLFFBQVEsQ0FBQyxPQUFPLENBQUMsVUFBQyxNQUFNO1FBQ3RCLElBQU0sVUFBVSxHQUFRLE1BQU0sQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFdkQsVUFBVSxDQUFDLE9BQU8sQ0FBQyxVQUFDLFNBQTRCO1lBQzlDLElBQUksTUFBTSxDQUFDLE1BQU0sSUFBSSxTQUFTLElBQUksU0FBUyxDQUFDLFlBQVksR0FBRyxDQUFDLENBQUMsRUFBRTtnQkFDN0QsYUFBYTtnQkFDYixLQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBRWpFLElBQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtvQkFDM0QsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztpQkFDL0M7YUFDRjtRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxPQUFPLENBQUMsSUFBSSxDQUFDLCtCQUErQixDQUFDLENBQUM7SUFDOUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUM7SUFDNUMsT0FBTyxDQUFDLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0lBRWpELE9BQU8sZ0JBQWdCLENBQUM7QUFDMUIsQ0FBQztBQXRDRCxnQ0FzQ0MifQ==\n\n//# sourceURL=webpack:///./src/sdk/core/systems.ts?");

/***/ }),

/***/ "./src/sdk/index.ts":
/*!**************************!*\
  !*** ./src/sdk/index.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar main_1 = __importDefault(__webpack_require__(/*! ./core/main */ \"./src/sdk/core/main.ts\"));\r\n// @ts-ignore\r\nif (!window.Uranus) {\r\n    // @ts-ignore\r\n    window.Uranus = {};\r\n}\r\nif (main_1.default.inEditor() === true) {\r\n    new main_1.default();\r\n    if (editor && Uranus && Uranus.Editor) {\r\n        Uranus.Editor.loadModules([\r\n            {\r\n                moduleName: \"Ammo\",\r\n                glueUrl: \"ammo.wasm.js\",\r\n                wasmUrl: \"ammo.wasm.wasm\",\r\n                fallbackUrl: \"ammo.js\",\r\n            },\r\n        ]).then(function () {\r\n            Uranus.Editor.startAppLoop(true, true);\r\n            Uranus.Editor.batchExecuteScripts();\r\n        });\r\n    }\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLHFEQUFpQztBQUtqQyxhQUFhO0FBQ2IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7SUFDbEIsYUFBYTtJQUNiLE1BQU0sQ0FBQyxNQUFNLEdBQUcsRUFBRSxDQUFDO0NBQ3BCO0FBRUQsSUFBSSxjQUFNLENBQUMsUUFBUSxFQUFFLEtBQUssSUFBSSxFQUFFO0lBQzlCLElBQUksY0FBTSxFQUFFLENBQUM7SUFFYixJQUFJLE1BQU0sSUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtRQUNyQyxNQUFNLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQztZQUN4QjtnQkFDRSxVQUFVLEVBQUUsTUFBTTtnQkFDbEIsT0FBTyxFQUFFLGNBQWM7Z0JBQ3ZCLE9BQU8sRUFBRSxnQkFBZ0I7Z0JBQ3pCLFdBQVcsRUFBRSxTQUFTO2FBQ3ZCO1NBQ0YsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNOLE1BQU0sQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztZQUN2QyxNQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixFQUFFLENBQUM7UUFDdEMsQ0FBQyxDQUFDLENBQUM7S0FDSjtDQUNGIn0=\n\n//# sourceURL=webpack:///./src/sdk/index.ts?");

/***/ }),

/***/ "./src/sdk/interface/index.ts":
/*!************************************!*\
  !*** ./src/sdk/interface/index.ts ***!
  \************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar styles_1 = __importDefault(__webpack_require__(/*! ./styles */ \"./src/sdk/interface/styles.ts\"));\r\nvar Interface = /** @class */ (function () {\r\n    function Interface() {\r\n    }\r\n    Interface.prototype.addStyles = function (cssString) {\r\n        var style = document.createElement(\"style\");\r\n        style.type = \"text/css\";\r\n        style.appendChild(document.createTextNode(cssString));\r\n        document.head.appendChild(style);\r\n    };\r\n    Interface.prototype.boot = function () {\r\n        var _this = this;\r\n        // --- clone an existing Playcanvas editor toolbar\r\n        var toolbarBank = document\r\n            .getElementById(\"layout-viewport\")\r\n            .querySelector(\".viewport-camera\");\r\n        // Create a copy of it\r\n        this.toolbar = toolbarBank.cloneNode(true);\r\n        // Update the ID, classes and initial style\r\n        this.toolbar.id = \"uranus-toolbar\";\r\n        this.toolbar.classList.add(\"uranus-toolbar\");\r\n        this.toolbar.style.top = \"40px\";\r\n        this.toolbar.style.left = \"4px\";\r\n        // Remove all children\r\n        this.toolbar.querySelectorAll(\"*\").forEach(function (n) { return n.remove(); });\r\n        // Add uranus main button\r\n        var node = document.createElement(\"div\");\r\n        node.classList.add(\"value\");\r\n        node.innerHTML = \"Uranus Editor\";\r\n        this.toolbar.appendChild(node);\r\n        node.onclick = function () {\r\n            if (_this.toolbar.classList.contains(\"active\")) {\r\n                _this.toolbar.classList.remove(\"active\");\r\n            }\r\n            else {\r\n                _this.toolbar.classList.add(\"active\");\r\n            }\r\n        };\r\n        // Attach on DOM\r\n        toolbarBank.after(this.toolbar);\r\n        // --- append new styles to DOM\r\n        this.addStyles(styles_1.default.getOverrides());\r\n    };\r\n    Interface.prototype.addRunUpdateButton = function (label, type, initialValue, callback) {\r\n        var list = document.createElement(\"ul\");\r\n        list.classList.add(\"uranus-list\");\r\n        list.style.position = \"absolute\";\r\n        list.style.top = \"32px\";\r\n        var button = document.createElement(\"li\");\r\n        button.innerHTML = label;\r\n        button.classList.add(\"uranus-list-item\");\r\n        list.appendChild(button);\r\n        var element;\r\n        switch (type) {\r\n            case \"checkbox\":\r\n                element = document.createElement(\"input\");\r\n                element.setAttribute(\"type\", \"checkbox\");\r\n                element.checked = initialValue;\r\n                element.classList.add(\"uranus-checkbox\");\r\n                break;\r\n        }\r\n        button.appendChild(element);\r\n        element.addEventListener(\"change\", function (event) {\r\n            callback(event.target.checked);\r\n        });\r\n        this.toolbar.appendChild(list);\r\n    };\r\n    return Interface;\r\n}());\r\nexports.default = Interface;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLG9EQUE4QjtBQUU5QjtJQUlFO0lBQWUsQ0FBQztJQUVoQiw2QkFBUyxHQUFULFVBQVUsU0FBaUI7UUFDekIsSUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUM5QyxLQUFLLENBQUMsSUFBSSxHQUFHLFVBQVUsQ0FBQztRQUN4QixLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztRQUV0RCxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsd0JBQUksR0FBSjtRQUFBLGlCQXFDQztRQXBDQyxrREFBa0Q7UUFDbEQsSUFBTSxXQUFXLEdBQUcsUUFBUTthQUN6QixjQUFjLENBQUMsaUJBQWlCLENBQUM7YUFDakMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFFckMsc0JBQXNCO1FBQ3RCLElBQUksQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQWdCLENBQUM7UUFFMUQsMkNBQTJDO1FBQzNDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxHQUFHLGdCQUFnQixDQUFDO1FBQ25DLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUM7UUFDaEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztRQUVoQyxzQkFBc0I7UUFDdEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQyxD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\n\n//# sourceURL=webpack:///./src/sdk/interface/index.ts?");

/***/ }),

/***/ "./src/sdk/interface/styles.ts":
/*!*************************************!*\
  !*** ./src/sdk/interface/styles.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Styles = /** @class */ (function () {\r\n    function Styles() {\r\n    }\r\n    Styles.getOverrides = function () {\r\n        return \"\\n        .uranus-toolbar.active{\\n            color: #b1b8ba;\\n            background-color: #20292b;\\n            box-shadow: 0 0 8px rgba(0,0,0,0.5);\\n        }\\n        .uranus-list{\\n            box-shadow: none !important;\\n            width: 140px !important;\\n        }\\n        .uranus-list-item{\\n            cursor: default;\\n        }\\n        .uranus-checkbox{\\n            float: right;\\n            margin-top: 9px;\\n            line-height: 33px !important;\\n        }\\n        \";\r\n    };\r\n    return Styles;\r\n}());\r\nexports.default = Styles;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3R5bGVzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3R5bGVzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7SUFBQTtJQXNCQSxDQUFDO0lBckJRLG1CQUFZLEdBQW5CO1FBQ0UsT0FBTyxnZkFrQkYsQ0FBQztJQUNSLENBQUM7SUFDSCxhQUFDO0FBQUQsQ0FBQyxBQXRCRCxJQXNCQyJ9\n\n//# sourceURL=webpack:///./src/sdk/interface/styles.ts?");

/***/ })

/******/ });